[build]
builder = "NIXPACKS" # Default builder strategy (Metal leverages this under the hood or overrides it)

# 1. Web Frontend
[[services]]
name = "web"
rootDirectory = "apps/web"
startCommand = "bun run start"
healthcheckPath = "/"
healthcheckTimeout = 100

# 2. Shifts Core Service
[[services]]
name = "shifts-service"
rootDirectory = "packages/shifts"
startCommand = "bun run start"
healthcheckPath = "/health" 

# 3. API Gateway
[[services]]
name = "api-gateway"
rootDirectory = "packages/api"
startCommand = "bun run start"
healthcheckPath = "/health"

# 4. Geofence Service
[[services]]
name = "geofence-service"
rootDirectory = "packages/geofence"
startCommand = "bun run start"
healthcheckPath = "/health"

# 5. Background Worker
[[services]]
name = "notification-worker"
rootDirectory = "packages/notification-worker"
startCommand = "bun run start"
# No healthcheck needed for worker, or use a specific endpoint if it exposes one
